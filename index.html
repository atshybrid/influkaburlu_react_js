<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1.0" />
		<title>%VITE_APP_NAME%</title>
		<!-- Favicon and SEO -->
		<link rel="icon" type="image/png" href="/assets/brand-logo.png" />
		<link rel="apple-touch-icon" href="/assets/brand-logo.png" />
		<meta name="theme-color" content="#f97316" />
		<meta name="description" content="%VITE_DEFAULT_META_DESCRIPTION%" />
		<link rel="canonical" href="%VITE_FRONTEND_URL%/" />
		<meta name="google-site-verification" content="%VITE_PUBLIC_GOOGLE_SITE_VERIFICATION%" />
		<meta property="og:title" content="%VITE_APP_NAME%" />
		<meta property="og:description" content="%VITE_DEFAULT_META_DESCRIPTION%" />
		<meta property="og:type" content="website" />
		<meta property="og:site_name" content="%VITE_APP_NAME%" />
		<meta property="og:image" content="%VITE_FRONTEND_URL%/assets/brand-logo.png" />
		<meta property="og:url" content="%VITE_FRONTEND_URL%" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:title" content="%VITE_APP_NAME%" />
		<meta name="twitter:description" content="%VITE_DEFAULT_META_DESCRIPTION%" />
		<meta name="twitter:image" content="%VITE_FRONTEND_URL%/assets/brand-logo.png" />

		<!-- Organization + Website schema (helps Google understand the brand) -->
		<script type="application/ld+json">
			{
				"@context": "https://schema.org",
				"@graph": [
					{
						"@type": "Organization",
						"@id": "%VITE_FRONTEND_URL%/#organization",
						"name": "%VITE_APP_NAME%",
						"url": "%VITE_FRONTEND_URL%",
						"logo": "%VITE_FRONTEND_URL%/assets/brand-logo.png",
						"description": "%VITE_DEFAULT_META_DESCRIPTION%"
					},
					{
						"@type": "WebSite",
						"@id": "%VITE_FRONTEND_URL%/#website",
						"url": "%VITE_FRONTEND_URL%/",
						"name": "%VITE_APP_NAME%",
						"publisher": { "@id": "%VITE_FRONTEND_URL%/#organization" }
					}
				]
			}
		</script>

		<!-- Analytics (loaded only when IDs are set) -->
		<script>
			(function () {
				var GA_ID = '%VITE_PUBLIC_GA_ID%';
				var GTM_ID = '%VITE_PUBLIC_GTM_ID%';
				var hasRealGa = GA_ID && GA_ID.indexOf('XXXX') === -1 && GA_ID.startsWith('G-');
				var hasRealGtm = GTM_ID && GTM_ID.indexOf('XXXX') === -1 && GTM_ID.startsWith('GTM-');

				if (hasRealGa) {
					var gtagScript = document.createElement('script');
					gtagScript.async = true;
					gtagScript.src = 'https://www.googletagmanager.com/gtag/js?id=' + encodeURIComponent(GA_ID);
					document.head.appendChild(gtagScript);

					window.dataLayer = window.dataLayer || [];
					function gtag(){ window.dataLayer.push(arguments); }
					gtag('js', new Date());
					gtag('config', GA_ID);
				}

				if (hasRealGtm) {
					window.dataLayer = window.dataLayer || [];
					window.dataLayer.push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
					var gtmScript = document.createElement('script');
					gtmScript.async = true;
					gtmScript.src = 'https://www.googletagmanager.com/gtm.js?id=' + encodeURIComponent(GTM_ID);
					document.head.appendChild(gtmScript);

					// Noscript fallback (best-effort)
					var iframe = document.createElement('iframe');
					iframe.src = 'https://www.googletagmanager.com/ns.html?id=' + encodeURIComponent(GTM_ID);
					iframe.height = '0';
					iframe.width = '0';
					iframe.style.display = 'none';
					iframe.style.visibility = 'hidden';
					document.addEventListener('DOMContentLoaded', function () {
						document.body.appendChild(iframe);
					});
				}
			})();
		</script>
	</head>
	<body class="bg-gray-50">
		<div id="root"></div>
		<script src="https://accounts.google.com/gsi/client" async defer></script>
		<script type="module" src="/src/main.jsx"></script>
	</body>
	</html>